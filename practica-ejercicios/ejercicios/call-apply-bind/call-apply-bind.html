<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Call - Apply - Bind</title>
    <link rel="stylesheet" href="../../assets/index.css">
</head>
<body>
    <h1>Call - Apply & Bind son funciones de prototipo</h1>
    <p>
        Estas funciones nos sirven para establecer el valor de
        this, es decir cambiar el contexto que se va usar cuando
        la función sea llamada.
    </p>

        <p>
            Las funciones call, apply y bind son parte del prototipo Function.
            Toda función usa este prototipo y por lo tanto tiene estas tres
            funciones.
        </p>

        <p>
            functionName.call(). Ejecuta la función recibiendo como primer
            argumento el this y los siguientes son los argumentos que recibe la
            función que llamó a call.
        </p>

        <p>
            functionName.apply(). Ejecuta la función recibiendo como primer
            argumento el this y como segundo un arreglo con los argumentos que
            recibe la función que llamó a apply.
        </p>

        <p>
            functionName.bind(). Recibe como primer y único argumento el this.
            No ejecuta la función, sólo regresa otra función con el nuevo this integrado.
        </p>

        <!-- Ejemplos -->
        <ul>
            <li><button class="call-to-action">Aprender</button></li>
            <li><button class="call-to-action">Aprender más</button></li>
            <li><button class="call-to-action">¡Nunca parar de Aprender!</button></li>
        </ul>

        <script>
            // Establece `this` usando `call`
            function saludar() {
                console.log(`Hola soy ${this.name} ${this.lastName}`);
            }

            const richard = {
                name: "Richard",
                lastName: "Espinoza"
            }

            saludar.call(richard);

            // Establece `this` usando `call` y pasar argumentos a la funcion
            function caminar(metros, direccion) {
                console.log(`${this.name} camina ${metros} metros hacia ${direccion}`);
            }

            caminar.call(richard, 400, "norte");

            // Establece `this` usando `apply` y pasar argumentos a la funcion
            const valores = [500, "Sur"];
            caminar.apply(richard, [900, "NorEste"])
            caminar.apply(richard, valores);

            // Establece `this` en una nueva funcion usando `bind`
            const daniel = {name: "Daniel", lastName: "Sanchez"};
            const danielSaluda = saludar.bind(daniel);
            danielSaluda();

                // Formas de pasarle los arcgumentos
            const danielCamina = caminar.bind(daniel);
            danielCamina(1000, 'Este');

            const danielCamina2 = caminar.bind(daniel, 2000, 'Oeste');
            danielCamina2();

            const danielCamina3 = caminar.bind(daniel, 3000);
            danielCamina3('SurOeste');

            // Cuando es util usar uno de estos

            const buttons = document.getElementsByClassName("call-to-action");
            // buttons.forEach(button => {
            //     button.onclick = () => alert("Nunca pares de aprender!!!");
            // });

            Array.prototype.forEach.call(buttons, button => {
                button.onclick = () => alert("Nunca pares de aprender!!!");
            });
        </script>
</body>
</html>