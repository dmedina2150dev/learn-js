<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prototype</title>
    <link rel="stylesheet" href="../../assets/index.css">
</head>
<body>
    <h1>Prototype</h1>
    <p>
        En Javascript todo son objetos, no tenemos clases,
        no tenemos ese plano para crear objetos.
        <br>
        Todos los objetos “heredan” de un prototipo que a su
        vez hereda de otro prototipo y así sucesivamente creando
        lo que se llama la prototype chain.
        <br>
        La keyword new crea un nuevo objeto que “hereda” todas
        las propiedades del prototype de otro objeto. No confundir
        prototype con proto que es sólo una propiedad en cada
        instancía que apunta al prototipo del que hereda.
    </p>


    <script>
        // un objeto común y corriente
        const zelda = {
            name: "Zelda"
        }

        zelda.saludar = function () {
            console.log(`Hola soy ${this.name}`);
        }

        zelda.saludar();

        // Otro objeto más
        const link = {
            name: "Link"
        }

        link.saludar = function () {
            console.log(`Hola soy ${this.name}`);
        }

        link.saludar();

        // Seamos un poco más eficientes

        function Hero(name) {
            const hero = {
                name: name
            }

            hero.saludar = function () {
                console.log(`Hola soy ${this.name}`);
            }

            return hero;
        }

        const IronMan = Hero("IronMan");
        IronMan.saludar();

        const Hulk = Hero("Hulk");
        Hulk.saludar();

        // Aun podemos mejorar más y evitar tener que crear la misma funcion cada vez

        const heroMethods = {
            saludar: function () {
                console.log(`Hola soy yo ${this.name}`);
            }
        }

        function HeroMarvel(name) {
            const hero = {
                name: name
            }

            hero.saludar = heroMethods.saludar;

            return hero;
        }

        const Locky = HeroMarvel("Locky");
        Locky.saludar();


        // Object.create
        // const nuevoObjeto = Object.create(objeto)

        const heroMethods2 = {
            saludar: function () {
                console.log(`Mi nombre es:  ${this.name}`);
            }
        }

        function HeroDC(name) {
            const hero = Object.create(heroMethods2);
            hero.name = name;
            return hero;
        }

        const Deadshot = HeroDC('Deadshot');
        Deadshot.saludar();


        // Los metodos de hero dentro de Hero

        function Hero2(name) {
            const hero = Object.create(Hero2.prototype);
            hero.name = name;
            return hero;
        }

        Hero2.prototype.saludar = function () {
            console.log(`Mi nombre es:  ${this.name}, jajaja se mamooo!`);
        }

        const viudaNegra = Hero2('Viuda Negra');
        viudaNegra.saludar();

        // new es un atajo (azucar sintactica) para llevar Hero.prototype al objeto

        function Hero3(name) {
            //const hero = Object.create(Hero2.prototype); // Se hace automaticamente
            //this = Object.create(Hero2.prototype); // lo almacena en this
            // hero.name = name;// cambia a this
            this.name = name;
            // return hero;// Ocurre implicitamente no hay que hacerlo
        }

        Hero3.prototype.saludar = function () {
            console.log(`New:  ${this.name}, jajaja se mamooo dos veces el new!`);
        }

        const spiderMan = new Hero3('Hombre Araña')
        spiderMan.saludar();
    </script>
</body>
</html>